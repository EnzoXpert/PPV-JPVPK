<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçì Mini Konvensyen Lucky Draw 2025 - Premium Edition</title>
    <meta name="description" content="Premium Lucky Draw System with Strawberry Theme - Mini Konvensyen PPV JPV PERAK">
    <link rel="icon" href="https://www.jpvpk.gov.my/images/favicon.ico">

    <!-- Premium Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;600;800&family=Rajdhani:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Premium Strawberry Theme */
            --strawberry: #ff1744;
            --strawberry-light: #ff5983;
            --strawberry-dark: #c51162;
            --green-leaf: #4caf50;
            --green-dark: #2e7d32;
            --cream: #fff3e0;
            --gold: #ffd700;
            --gold-light: #ffeb3b;
            --gold-dark: #ffb300;
            --dark: #0a0a1a;
            --dark-light: #1a1a2e;
            --dark-medium: #16213e;
            --white: #ffffff;
            --glass: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.18);
            --shadow-strawberry: 0 8px 32px rgba(255, 23, 68, 0.3);
            --shadow-gold: 0 8px 32px rgba(255, 215, 0, 0.4);
            --shadow-dark: 0 16px 64px rgba(0, 0, 0, 0.5);
            --radius-sm: 12px;
            --radius-md: 20px;
            --radius-lg: 32px;
            --transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            --bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            color: var(--white);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Premium Animated Background with Strawberry Theme */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            background: 
                linear-gradient(45deg, var(--dark) 0%, var(--dark-light) 25%, var(--dark-medium) 50%, var(--dark) 75%),
                radial-gradient(circle at 20% 20%, rgba(255, 23, 68, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.08) 0%, transparent 50%);
            background-size: 400% 400%, 100% 100%, 100% 100%, 100% 100%;
            animation: gradientShift 20s ease infinite, pulseGlow 8s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%, 50% 50%, 50% 50%, 50% 50%; }
            25% { background-position: 100% 50%, 50% 50%, 50% 50%, 50% 50%; }
            50% { background-position: 100% 100%, 50% 50%, 50% 50%, 50% 50%; }
            75% { background-position: 0% 100%, 50% 50%, 50% 50%, 50% 50%; }
        }

        @keyframes pulseGlow {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        /* Floating Strawberries */
        .strawberries {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
            overflow: hidden;
        }

        .strawberry {
            position: absolute;
            font-size: 2rem;
            opacity: 0.8;
            animation: floatStrawberry 15s infinite linear;
        }

        .strawberry:nth-child(even) {
            animation-duration: 18s;
            font-size: 1.5rem;
        }

        .strawberry:nth-child(3n) {
            animation-duration: 12s;
            font-size: 2.5rem;
        }

        @keyframes floatStrawberry {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% { 
                opacity: 0.8; 
                transform: translateY(90vh) rotate(36deg) scale(1);
            }
            90% { 
                opacity: 0.8; 
                transform: translateY(-10vh) rotate(324deg) scale(1);
            }
            100% {
                transform: translateY(-20vh) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Sparkle Effects */
        .sparkles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--gold);
            border-radius: 50%;
            animation: sparkleFloat 4s ease-in-out infinite;
        }

        @keyframes sparkleFloat {
            0%, 100% { 
                opacity: 0;
                transform: translateY(0) scale(0);
            }
            50% { 
                opacity: 1;
                transform: translateY(-20px) scale(1);
            }
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            position: relative;
            z-index: 1;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
            border-radius: var(--radius-lg);
            margin-bottom: 2rem;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-dark);
            transition: var(--transition);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
        }

        .logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            box-shadow: var(--shadow-strawberry);
            border: 4px solid var(--glass-border);
            background: var(--glass);
            backdrop-filter: blur(20px);
            transition: var(--transition);
            animation: logoFloat 6s ease-in-out infinite;
            object-fit: contain;
            padding: 8px;
        }

        .logo:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 50px rgba(255, 23, 68, 0.6);
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .logo-glow {
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            background: conic-gradient(
                from 0deg,
                var(--strawberry),
                var(--green-leaf),
                var(--gold),
                var(--strawberry-light),
                var(--strawberry)
            );
            border-radius: 50%;
            z-index: -1;
            animation: logoRotate 8s linear infinite;
            opacity: 0.4;
        }

        @keyframes logoRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .title-container {
            text-align: center;
        }

        .title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: var(--strawberry);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            margin: 0;
        }

        .subtitle {
            font-size: 1rem;
            color: var(--cream);
            opacity: 0.9;
            margin-top: 0.5rem;
        }

        h1 {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--strawberry) 0%, var(--strawberry-light) 50%, var(--gold) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
            text-shadow: 0 0 30px rgba(255, 23, 68, 0.5);
            animation: titlePulse 4s ease-in-out infinite;
            position: relative;
            margin: 1rem 0;
        }

        h1::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 23, 68, 0.3), transparent);
            animation: shine 3s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes titlePulse {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(255, 23, 68, 0.4)); }
            50% { filter: drop-shadow(0 0 40px rgba(255, 23, 68, 0.8)); }
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        /* Pages */
        .page {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s var(--bounce);
        }

        .page.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        /* Cards */
        .card, .panel {
            background: var(--glass);
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 3rem;
            width: 100%;
            max-width: 800px;
            box-shadow: var(--shadow-dark);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .card::before, .panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.8s ease;
        }

        .card:hover, .panel:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-strawberry);
            border-color: rgba(255, 23, 68, 0.3);
        }

        .card:hover::before, .panel:hover::before {
            left: 100%;
        }

        /* Buttons */
        .btn, button {
            background: linear-gradient(135deg, var(--strawberry), var(--strawberry-dark));
            border: none;
            color: var(--white);
            padding: 1.2rem 2.5rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-family: 'Rajdhani', sans-serif;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-strawberry);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn::before, button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover, button:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-gold);
            background: linear-gradient(135deg, var(--strawberry-light), var(--strawberry));
        }

        .btn:hover::before, button:hover::before {
            left: 100%;
        }

        .btn:active, button:active {
            transform: translateY(-1px) scale(1.02);
        }

        .btn-ghost {
            background: var(--glass);
            color: var(--strawberry);
            border: 1px solid var(--strawberry-light);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .btn-ghost:hover {
            background: rgba(255, 23, 68, 0.1);
            color: var(--white);
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--dark);
            font-weight: 700;
        }

        .btn-gold:hover {
            background: linear-gradient(135deg, var(--gold-light), var(--gold));
            box-shadow: var(--shadow-gold);
        }

        .btn-green {
            background: linear-gradient(135deg, var(--green-leaf), var(--green-dark));
        }

        .btn-green:hover {
            background: linear-gradient(135deg, #66bb6a, var(--green-leaf));
        }

        /* Form Elements */
        input, textarea, select {
            width: 100%;
            padding: 1.2rem 1.5rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--glass-border);
            background: var(--glass);
            backdrop-filter: blur(20px);
            color: var(--white);
            font-size: 1rem;
            margin-bottom: 1.5rem;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--strawberry);
            box-shadow: 0 0 20px rgba(255, 23, 68, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        /* Wheel Container */
        .wheel-container {
            position: relative;
            width: min(500px, 90vw);
            height: min(500px, 90vw);
            margin: 2rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wheel-container::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            background: conic-gradient(
                from 0deg,
                var(--strawberry),
                var(--green-leaf),
                var(--gold),
                var(--strawberry-light),
                var(--strawberry)
            );
            border-radius: 50%;
            z-index: -1;
            animation: wheelGlow 4s linear infinite;
        }

        @keyframes wheelGlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stage-wrap {
            position: relative;
            display: grid;
            place-items: center;
        }

        .pointer {
            position: absolute;
            top: -20px;
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-bottom: 28px solid var(--strawberry);
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.25));
            z-index: 10;
        }

        #wheelCanvas, #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: var(--shadow-dark), inset 0 0 30px rgba(0, 0, 0, 0.5);
            transition: var(--transition);
            background: var(--dark-light);
        }

        /* Winner Modal */
        .winner-modal, #winnerOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
        }

        .winner-modal.active, #winnerOverlay.show {
            opacity: 1;
            pointer-events: all;
        }

        .winner-content, .winner-box {
            background: var(--glass);
            backdrop-filter: blur(30px);
            border: 2px solid var(--strawberry);
            border-radius: var(--radius-lg);
            padding: 4rem;
            text-align: center;
            box-shadow: var(--shadow-strawberry);
            animation: winnerPop 0.8s var(--bounce);
            position: relative;
            overflow: hidden;
            max-width: 90vw;
        }

        .winner-content::before, .winner-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg,
                transparent,
                rgba(255, 23, 68, 0.1),
                transparent
            );
            animation: winnerGlow 3s linear infinite;
        }

        @keyframes winnerPop {
            0% {
                opacity: 0;
                transform: scale(0.5) rotate(-10deg);
            }
            50% {
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        @keyframes winnerGlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .winner-emoji {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounce 1s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .winner-name, #winnerName {
            font-family: 'Orbitron', monospace;
            font-size: clamp(1.5rem, 4vw, 3rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--strawberry) 0%, var(--strawberry-light) 50%, var(--gold) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
            margin: 1rem 0 2rem;
            animation: winnerNamePulse 2s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }

        @keyframes winnerNamePulse {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(255, 23, 68, 0.6)); }
            50% { filter: drop-shadow(0 0 40px rgba(255, 23, 68, 1)); }
        }

        /* Statistics */
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--glass);
            border-radius: var(--radius-md);
            border: 1px solid var(--glass-border);
            gap: 1rem;
        }

        .stat-item {
            text-align: center;
            flex: 1;
        }

        .stat-number {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 900;
            color: var(--strawberry);
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Button Grid */
        .btn-grid, .row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            width: 100%;
            margin-top: 2rem;
        }

        /* Lists */
        .list, #list {
            list-style: none;
            padding: 0;
            max-height: 400px;
            overflow-y: auto;
            width: 100%;
        }

        .list li, #list li {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-sm);
            padding: 1rem 1.5rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .list li:hover, #list li:hover {
            background: rgba(255, 23, 68, 0.1);
            border-color: var(--strawberry);
            transform: translateX(10px);
        }

        /* Countdown Timer */
        .countdown {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            text-align: center;
            font-family: 'Orbitron', monospace;
            color: var(--white);
        }

        .countdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(135deg, var(--strawberry), var(--strawberry-dark));
            color: white;
            padding: 20px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-strawberry);
            min-width: 80px;
            transition: transform 0.3s ease;
            border: 1px solid var(--glass-border);
        }

        .countdown-item:hover {
            transform: scale(1.05);
        }

        .countdown-value {
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: 900;
            line-height: 1;
            color: var(--gold);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .countdown-label {
            font-size: 1rem;
            font-weight: 400;
            color: var(--cream);
            text-transform: uppercase;
            margin-top: 5px;
        }

        /* Agenda */
        .agenda-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            border-left: 4px solid var(--strawberry);
            position: relative;
        }

        .agenda-item {
            padding: 20px 0 20px 40px;
            position: relative;
        }

        .agenda-item::before {
            content: 'üçì';
            position: absolute;
            left: -15px;
            top: 25px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--strawberry);
            border: 4px solid var(--cream);
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .agenda-content {
            background-color: var(--glass);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-dark);
            border: 1px solid var(--glass-border);
        }

        .agenda-content h4 {
            margin-top: 0;
            color: var(--strawberry);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--glass);
            backdrop-filter: blur(30px);
            padding: 30px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-strawberry);
            text-align: center;
            max-width: 400px;
            width: 90%;
            border: 1px solid var(--glass-border);
        }

        .modal-content h3 {
            margin-top: 0;
            color: var(--strawberry);
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--glass);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--glass-border);
        }

        th {
            background: rgba(255, 23, 68, 0.2);
            color: var(--strawberry);
            font-weight: 700;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem 0.5rem;
            }

            .card, .panel {
                padding: 2rem;
                margin: 0 1rem;
            }

            .btn, button {
                padding: 1rem 2rem;
                font-size: 0.9rem;
            }

            .btn-grid, .row {
                grid-template-columns: 1fr;
            }

            .stats {
                flex-direction: column;
                gap: 1rem;
            }

            .topbar {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .nav-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* Loading Animation */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--strawberry);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        @keyframes toastSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes toastSlideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* Additional Strawberry Elements */
        .strawberry-divider {
            text-align: center;
            margin: 2rem 0;
            font-size: 2rem;
            opacity: 0.3;
        }

        .strawberry-corner {
            position: absolute;
            font-size: 3rem;
            opacity: 0.1;
            animation: floatCorner 8s ease-in-out infinite;
        }

        .strawberry-corner.top-left {
            top: 1rem;
            left: 1rem;
        }

        .strawberry-corner.top-right {
            top: 1rem;
            right: 1rem;
            animation-delay: 2s;
        }

        .strawberry-corner.bottom-left {
            bottom: 1rem;
            left: 1rem;
            animation-delay: 4s;
        }

        .strawberry-corner.bottom-right {
            bottom: 1rem;
            right: 1rem;
            animation-delay: 6s;
        }

        @keyframes floatCorner {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg"></div>

    <!-- Floating Strawberries -->
    <div class="strawberries" id="strawberries"></div>

    <!-- Sparkles -->
    <div class="sparkles" id="sparkles"></div>

    <!-- Strawberry Corner Decorations -->
    <div class="strawberry-corner top-left">üçì</div>
    <div class="strawberry-corner top-right">üçì</div>
    <div class="strawberry-corner bottom-left">üçì</div>
    <div class="strawberry-corner bottom-right">üçì</div>

    <div class="container">
        <!-- Top Navigation -->
        <div class="topbar">
            <div class="logo-container">
                <div class="logo-glow"></div>
                <img class="logo" src="https://www.jpvpk.gov.my/images/2023/logo-jpvpk.png" alt="JPV Perak Logo" onerror="this.src='https://www.jpvpk.gov.my/images/favicon.ico'">
                <div class="title-container">
                    <div class="title">Mini Konvensyen</div>
                    <div class="subtitle">PPV JPV PERAK</div>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-ghost" onclick="showPage('intro')">üè† Utama</button>
                <button class="btn btn-ghost" onclick="showPage('agenda')">üìÖ Agenda</button>
                <button class="btn" onclick="showAdminLoginModal()">üîê Admin</button>
            </div>
        </div>

        <header>
            <h1>üçì Lucky Draw Premium üçì</h1>
            <div class="subtitle" style="font-size: 1.4rem; color: var(--gold); margin-top: 1rem;">
                Strawberry Edition 2025
            </div>
        </header>

        <!-- Main Menu -->
        <div id="intro" class="page active">
            <div class="panel" style="text-align:center;">
                <h2 style="font-family:'Playfair Display', serif; font-size:3rem; color:var(--strawberry); margin:0;">üçì Selamat Datang üçì</h2>
                <div class="strawberry-divider">üçì üçì üçì</div>
                <h3 style="font-weight:400; font-size:1.5rem; color:var(--cream);">Mini Konvensyen Program Pengembangan Veterinar</h3>

                <div style="height:30px;"></div>
                <div class="row" style="justify-content:center; gap:30px;">
                    <div style="font-size:1.5rem; font-weight:600; color:var(--gold);">üóìÔ∏è 19 - 21 Ogos 2025</div>
                    <div style="font-size:1.5rem; font-weight:600; color:var(--gold);">üìç Cameron Highlands</div>
                </div>

                <!-- Countdown Timer -->
                <div class="panel" style="background:var(--glass); border:2px solid var(--strawberry-light); box-shadow:var(--shadow-strawberry); padding:2rem; margin:2rem auto; max-width:700px;">
                    <h3 style="margin-top:0; color:var(--strawberry); font-family: 'Orbitron', monospace;">üçì Kiraan Detik ke Cabutan Bertuah! üçì</h3>
                    <div class="countdown" id="countdown">
                        <div class="countdown-item">
                            <span id="days" class="countdown-value">00</span>
                            <span class="countdown-label">Hari</span>
                        </div>
                        <div class="countdown-item">
                            <span id="hours" class="countdown-value">00</span>
                            <span class="countdown-label">Jam</span>
                        </div>
                        <div class="countdown-item">
                            <span id="minutes" class="countdown-value">00</span>
                            <span class="countdown-label">Minit</span>
                        </div>
                        <div class="countdown-item">
                            <span id="seconds" class="countdown-value">00</span>
                            <span class="countdown-label">Saat</span>
                        </div>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-number" id="participantCount">0</div>
                        <div class="stat-label">üçì Peserta</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="winnerCount">0</div>
                        <div class="stat-label">üèÜ Pemenang</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="remainingCount">0</div>
                        <div class="stat-label">‚è≥ Baki</div>
                    </div>
                </div>

                <div style="height:30px;"></div>
                <p style="max-width:600px; margin:0 auto; line-height:1.6; color:var(--cream); font-size:1.1rem;">
                    üçì Sertai kami dalam tiga hari yang penuh dengan ilmu dan perkongsian. Sistem Lucky Draw Premium dengan tema strawberry yang manis dan menyegarkan! üçì
                </p>

                <div style="height:30px;"></div>

                <!-- Registration Section with QR Code -->
                <div class="panel" style="background:var(--glass); border:2px solid var(--gold); margin: 2rem 0; padding: 2rem;">
                    <h3 style="color:var(--gold); margin-top:0; text-align:center;">üìù Pendaftaran Peserta Strawberry üçì</h3>
                    <div class="strawberry-divider">üçì üçì üçì</div>

                    <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 3rem; margin-top: 2rem;">
                        <!-- Registration Button -->
                        <div style="text-align: center;">
                            <button onclick="openRegistrationForm()" class="btn btn-gold" style="font-size: 1.3rem; padding: 1.5rem 2.5rem; margin-bottom: 1rem;">
                                üìù Daftar Sekarang
                            </button>
                            <p style="color: var(--cream); font-size: 0.9rem; opacity: 0.8;">Klik butang untuk borang online</p>
                        </div>

                        <!-- QR Code -->
                        <div style="text-align: center;">
                            <div style="position: relative; display: inline-block;">
                                <!-- Strawberry decorations around QR -->
                                <div style="position: absolute; top: -15px; left: -15px; font-size: 2rem; animation: floatCorner 3s ease-in-out infinite;">üçì</div>
                                <div style="position: absolute; top: -15px; right: -15px; font-size: 2rem; animation: floatCorner 3s ease-in-out infinite reverse;">üçì</div>
                                <div style="position: absolute; bottom: -15px; left: -15px; font-size: 2rem; animation: floatCorner 3s ease-in-out infinite; animation-delay: 1s;">üçì</div>
                                <div style="position: absolute; bottom: -15px; right: -15px; font-size: 2rem; animation: floatCorner 3s ease-in-out infinite reverse; animation-delay: 1s;">üçì</div>

                                <a href='https://me-qr.com' border='0' style='cursor:pointer;display:block'>
                                    <img src='https://storage2.me-qr.com/qr/239179379.png' alt='Create qr code for free' style="width: 200px; height: 200px; border-radius: var(--radius-md); box-shadow: var(--shadow-strawberry); border: 3px solid var(--strawberry-light); background: white; padding: 10px;">
                                </a>
                                <a href='https://me-qr.com' border='0' style='cursor:default;display:none'>Create qr code for free</a>
                            </div>
                            <p style="color: var(--cream); font-size: 0.9rem; opacity: 0.8; margin-top: 1rem;">Imbas untuk daftar cepat</p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <p style="color: var(--cream); font-size: 1rem; opacity: 0.9;">
                            üçì Pilih salah satu cara untuk mendaftar sebagai peserta strawberry! üçì
                        </p>
                    </div>
                </div>

                <div class="btn-grid" style="margin-top: 2rem;">
                    <button onclick="showPage('agenda')" class="btn btn-green">üìÖ Lihat Agenda</button>
                </div>
            </div>
        </div>

        <!-- Agenda Page -->
        <div id="agenda" class="page">
            <div class="panel">
                <h2 style="text-align:center; font-family:'Playfair Display', serif; color:var(--strawberry);">üçì Agenda Konvensyen üçì</h2>
                <div class="strawberry-divider">üçì üçì üçì</div>
                <div class="agenda-container">
                    <!-- Day 1 -->
                    <div class="agenda-item">
                        <div class="agenda-content">
                            <h4>üçì 19 Ogos 2025 (Selasa)</h4>
                            <ul>
                                <li>10:00 pagi - Berkumpul & Bergerak dari Ibu Pejabat JPV Perak</li>
                                <li>01:00 ptg - Pendaftaran & Makan Tengah Hari</li>
                                <li>02:30 ptg - Taklimat & Agihan Bilik</li>
                                <li>03:30 ptg - Pengenalan Konsep Perniagaan Ternakan</li>
                                <li>05:30 ptg - Minum Petang & Solat</li>
                                <li>07:00 malam - Makan Malam</li>
                                <li>08:00 malam - Kaedah Pengiraan Input Biologi & Ekonomi Ternakan</li>
                                <li>10:00 malam - Supper & Bersurai</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Day 2 -->
                    <div class="agenda-item">
                        <div class="agenda-content">
                            <h4>üçì 20 Ogos 2025 (Rabu)</h4>
                            <ul>
                                <li>07:00 pagi - Sarapan Pagi</li>
                                <li>08:30 pagi - Sumber Pembiayaan Aspek & Kriteria Penting</li>
                                <li>10:30 pagi - Minum Pagi</li>
                                <li>11:00 pagi - Kaedah Penyediaan Rancangan Perniagaan</li>
                                <li>01:00 ptg - Makan Tengah Hari & Solat</li>
                                <li>02:30 ptg - Mini Konvensyen PPV JPV Perak</li>
                                <li>04:30 ptg - Minum Petang & Aktiviti Bebas</li>
                                <li>05:00 ptg - Makan Malam & Solat</li>
                                <li>08:00 malam - Sambungan Pembentangan Success Story</li>
                                <li>10:00 malam - Supper & Bersurai</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Day 3 -->
                    <div class="agenda-item">
                        <div class="agenda-content">
                            <h4>üçì 21 Ogos 2025 (Khamis) - Lucky Draw Day!</h4>
                            <ul>
                                <li>07:00 pagi - Sarapan Pagi</li>
                                <li>08:00 pagi - Sambungan Pembentangan Success Story</li>
                                <li>10:00 pagi - Minum Pagi</li>
                                <li>10:30 pagi - Majlis Pembukaan & Ucapan Pengarah</li>
                                <li>11:30 pagi - Pengumuman Pemenang Hadiah</li>
                                <li>11:45 pagi - üçì Cabutan Bertuah Strawberry Premium! üçì</li>
                                <li>12:00 tengah hari - Makan Tengah Hari & Bersurai</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button onclick="showPage('intro')" class="btn btn-ghost">‚¨ÖÔ∏è Kembali</button>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="admin-page" class="page">
            <div class="panel" style="text-align:center;">
                <h2 style="margin-top:0; font-family:'Playfair Display', serif; color:var(--strawberry);">üçì Panel Admin üçì</h2>
                <div class="strawberry-divider">üçì üçì üçì</div>
                <p style="color:var(--cream);">Selamat datang ke panel admin strawberry premium!</p>

                <!-- Main Admin Functions -->
                <div class="btn-grid">
                    <button class="btn btn-gold" onclick="showPage('wheelPage')">üé∞ Lucky Draw</button>
                    <button class="btn btn-green" onclick="showPage('attendees')">üë• Urus Peserta</button>
                    <button class="btn" onclick="loadSampleData()">üìù Data Contoh</button>
                    <button class="btn btn-ghost" onclick="showPage('winners')">üèÜ Lihat Pemenang</button>
                </div>

                <!-- Registration Section -->
                <div class="panel" style="background:var(--glass); border:2px solid var(--green-leaf); margin-top: 2rem; padding: 2rem;">
                    <h3 style="color:var(--green-leaf); margin-top:0;">üìù Pendaftaran Peserta</h3>
                    <div class="strawberry-divider">üçì üçì üçì</div>

                    <div style="display: flex; flex-direction: column; align-items: center; gap: 1.5rem;">
                        <!-- Registration Button -->
                        <button class="btn btn-green" onclick="openRegistrationForm()" style="font-size: 1.2rem; padding: 1.5rem 2rem;">
                            üìù Daftar Peserta Baru
                        </button>

                        <!-- QR Code for Registration -->
                        <div style="text-align: center;">
                            <p style="color: var(--cream); margin-bottom: 1rem; font-weight: 600;">
                                üçì Atau Imbas QR Code untuk Daftar:
                            </p>
                            <a href='https://me-qr.com' border='0' style='cursor:pointer;display:block'>
                                <img src='https://storage2.me-qr.com/qr/239179379.png' alt='Create qr code for free' style="border-radius: var(--radius-md); box-shadow: var(--shadow-strawberry); max-width: 200px; border: 3px solid var(--strawberry-light);">
                            </a>
                            <a href='https://me-qr.com' border='0' style='cursor:default;display:none'>Create qr code for free</a>
                        </div>
                    </div>
                </div>

                <!-- Back Button -->
                <div style="margin-top: 2rem;">
                    <button class="btn btn-ghost" onclick="showPage('intro')">‚¨ÖÔ∏è Kembali ke Menu Utama</button>
                </div>
            </div>
        </div>

        <!-- Manage Participants -->
        <div id="attendees" class="page">
            <div class="panel">
                <h2 style="margin-top:0; color:var(--strawberry);">üçì Pengurusan Peserta üçì</h2>
                <div class="strawberry-divider">üçì üçì üçì</div>

                <div class="row" style="grid-template-columns: 1fr auto;">
                    <input id="nameInput" placeholder="üçì Masukkan nama peserta..." autocomplete="off">
                    <button class="btn" id="addNameBtn">‚ûï Tambah</button>
                </div>

                <div class="row" style="grid-template-columns: 1fr auto;">
                    <input id="qrNameInput" placeholder="üçì Nama untuk jana QR kod..." autocomplete="off">
                    <button class="btn btn-green" id="generateQrBtn">üì± Jana QR</button>
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <canvas id="qr-code-canvas" style="width:280px; height:280px; border-radius:var(--radius-md); border:2px solid var(--strawberry-light); background: var(--white);"></canvas>
                </div>

                <div style="margin: 2rem 0; text-align: center;">
                    <p style="color: var(--gold); font-weight: bold; font-size: 1.2rem;">
                        üçì <span id="participantCountText">0</span> peserta didaftarkan
                    </p>
                </div>

                <ul id="list" class="list"></ul>

                <div class="btn-grid">
                    <button class="btn btn-ghost" id="clearParticipantsBtn">üóëÔ∏è Padam Semua</button>
                    <button onclick="showPage('intro')" class="btn">‚¨ÖÔ∏è Kembali</button>
                </div>
            </div>
        </div>

        <!-- Lucky Draw Wheel -->
        <div id="wheelPage" class="page">
            <div class="panel" style="text-align:center;">
                <h2 style="margin-top:0; color:var(--strawberry);">üçì Cabutan Bertuah Strawberry üçì</h2>
                <div class="strawberry-divider">üçì üçì üçì</div>

                <div class="stage-wrap">
                    <div class="pointer"></div>
                    <canvas id="wheel" width="500" height="500"></canvas>
                </div>

                <div style="margin: 2rem 0;">
                    <select id="prizeCategory" style="margin-bottom: 1rem;">
                        <option value="üçì Cabutan Bertuah Strawberry">üçì Cabutan Bertuah Strawberry</option>
                        <option value="‚≠ê Success Story Terbaik">‚≠ê Success Story Terbaik</option>
                        <option value="üèÖ Peg. Pembimbing Terbaik">üèÖ Peg. Pembimbing Terbaik</option>
                        <option value="üéØ Hadiah Khas">üéØ Hadiah Khas</option>
                    </select>
                </div>

                <p style="font-size: 1.3rem; margin-bottom: 2rem; font-family: 'Rajdhani', sans-serif; font-weight: 600;">
                    üçì Sedia untuk memutar roda strawberry bertuah? üçì
                </p>

                <div class="btn-grid">
                    <button id="spinBtn" onclick="spinWheel()" class="btn btn-gold" style="font-size: 1.3rem; padding: 1.8rem 3rem;">
                        üé∞ PUTAR RODA STRAWBERRY! üçì
                    </button>
                    <button onclick="showPage('intro')" class="btn btn-ghost">‚¨ÖÔ∏è Kembali ke Menu</button>
                </div>

                <div id="spinBanner" style="display:none; margin-top: 2rem; padding: 1rem; background: var(--strawberry); color: var(--white); border-radius: var(--radius-md); font-weight: bold;">
                    üçì Roda Strawberry sedang berputar... üéµ
                </div>

                <div style="margin-top: 2rem; text-align: center; opacity: 0.8;">
                    <p>üí° Tip: Tekan <kbd style="background: var(--glass); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--strawberry);">SPACEBAR</kbd> untuk memutar roda</p>
                </div>
            </div>
        </div>

        <!-- Winners Page -->
        <div id="winners" class="page">
            <div class="panel" style="max-width: 900px;">
                <h2 style="margin-top:0; color:var(--strawberry);">üçì Senarai Pemenang Strawberry üçì</h2>
                <div class="strawberry-divider">üçì üçì üçì</div>

                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>üçì Nama</th>
                            <th>üèÜ Kategori</th>
                            <th>üïí Masa</th>
                        </tr>
                    </thead>
                    <tbody id="winnersBody">
                        <tr>
                            <td colspan="4" style="text-align: center; opacity: 0.7; font-style: italic;">
                                üçì Belum ada pemenang strawberry
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="btn-grid">
                    <button class="btn btn-green" id="exportBtn">üìÑ Export CSV</button>
                    <button class="btn btn-ghost" id="clearWinnersBtn">üóëÔ∏è Kosongkan</button>
                    <button onclick="showPage('intro')" class="btn">‚¨ÖÔ∏è Kembali</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Winner Overlay -->
    <div id="winnerOverlay">
        <div class="winner-box">
            <div class="winner-emoji">üçìüéâüçì</div>
            <div style="font-size: 2rem; color: var(--strawberry); font-weight: bold; margin-bottom: 1rem;">
                PEMENANG STRAWBERRY KAMI ADALAH‚Ä¶
            </div>
            <div id="winnerName" class="winner-name">Winner Name</div>
            <div id="winnerCategory" style="margin-top: 8px; font-weight: bold; color: var(--gold); font-size: 1.3rem;"></div>
            <div style="margin: 2rem 0; font-size: 1.5rem;">üçìüèÜüçì</div>
            <button class="btn btn-gold" onclick="closeWinnerOverlay()">‚ú® Hebat! Tutup</button>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal" onclick="closeModal()">
        <div class="modal-content">
            <h3 id="modal-title"></h3>
            <p id="modal-message"></p>
            <div id="modal-buttons" class="modal-buttons"></div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="audioDrumroll" preload="auto" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1" type="audio/wav">
    </audio>

    <audio id="audioFanfare" preload="auto">
        <source src="data:audio/wav;base64,UklGRnMJAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YU8JAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSYEJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmweBDqN1" type="audio/wav">
    </audio>

    <script>
        // Global state
        const state = {
            currentPage: 'intro',
            participants: [],
            winners: [],
            isLoggedIn: false,
            spinning: false
        };

        // Audio system with fallback
        const playSound = (audioId, options = {}) => {
            try {
                const audio = document.getElementById(audioId);
                if (audio) {
                    audio.currentTime = 0;
                    if (options.volume) audio.volume = options.volume;
                    if (options.loop !== undefined) audio.loop = options.loop;
                    audio.play().catch(() => console.log('Audio not available'));
                }
            } catch (e) {
                console.log('Sound not available');
            }
        };

        // DOM elements
        const $ = q => document.querySelector(q);
        const pages = document.querySelectorAll('.page');
        const countdownDate = new Date("Aug 21, 2025 11:45:00").getTime();
        const urlPendaftaran = 'https://forms.gle/kBoXbJvsSF9axwfC6';

        // Wheel variables
        let wheelCtx;
        let angle = 0;
        const colors = ['#ff1744', '#4caf50', '#ffd700', '#ff5983', '#2e7d32', '#ffb300'];

        // Page navigation
        function showPage(pageId) {
            playSound('audioDrumroll', { volume: 0.1 });
            setTimeout(() => document.getElementById('audioDrumroll').pause(), 200);

            pages.forEach(p => {
                p.classList.remove('active');
                if (p.id === pageId) {
                    p.classList.add('active');
                }
            });
            state.currentPage = pageId;
            saveState();

            if (pageId === 'wheelPage') {
                setTimeout(() => drawWheel(), 400);
            }
            updateStats();
        }

        // Statistics update
        function updateStats() {
            const participantCount = $('#participantCount');
            const winnerCount = $('#winnerCount');
            const remainingCount = $('#remainingCount');
            const participantCountText = $('#participantCountText');

            if (participantCount) participantCount.textContent = state.participants.length;
            if (winnerCount) winnerCount.textContent = state.winners.length;
            if (remainingCount) remainingCount.textContent = Math.max(0, state.participants.length);
            if (participantCountText) participantCountText.textContent = state.participants.length;
        }

        // Local storage
        function saveState() {
            localStorage.setItem('strawberryLuckyDraw', JSON.stringify(state));
        }

        function loadState() {
            const savedState = localStorage.getItem('strawberryLuckyDraw');
            if (savedState) {
                Object.assign(state, JSON.parse(savedState));
            }
            updateStats();
        }

        // Modal system
        function showModal(title, message, buttons) {
            const modal = $('#modal');
            const modalTitle = $('#modal-title');
            const modalMessage = $('#modal-message');
            const buttonsContainer = $('#modal-buttons');

            modalTitle.textContent = title;
            modalMessage.innerHTML = message;
            buttonsContainer.innerHTML = '';

            buttons.forEach(btn => {
                const buttonElement = document.createElement('button');
                buttonElement.textContent = btn.text;
                buttonElement.className = `btn ${btn.className || ''}`;
                buttonElement.onclick = () => {
                    btn.onClick();
                    modal.style.display = 'none';
                };
                buttonsContainer.appendChild(buttonElement);
            });
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = $('#modal');
            if (modal) modal.style.display = 'none';
        }

        // Registration form
        function openRegistrationForm() {
            window.open(urlPendaftaran, '_blank');
        }

        // Admin login
        function showAdminLoginModal() {
            const formHtml = `
                <form onsubmit="handleAdminLogin(event)">
                    <p style="text-align:left; margin-bottom: 20px; color: var(--cream);">üçì Masukkan kelayakan admin strawberry:</p>
                    <label for="adminUsername" style="font-weight:600; margin-bottom:8px; display:block; text-align:left; color: var(--strawberry);">Nama Pengguna</label>
                    <input type="text" id="adminUsername" placeholder="Nama pengguna" required style="color: var(--dark);" />
                    <label for="adminPassword" style="font-weight:600; margin-bottom:8px; display:block; text-align:left; color: var(--strawberry);">Kata Laluan</label>
                    <input type="password" id="adminPassword" placeholder="Kata laluan" required style="color: var(--dark);" />
                    <button type="submit" class="btn">üçì Log Masuk</button>
                </form>
            `;
            showModal('üçì Log Masuk Admin Strawberry', formHtml, []);
        }

        function handleAdminLogin(event) {
            event.preventDefault();
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;

            if (username === 'Atlas' && password === '553901') {
                state.isLoggedIn = true;
                saveState();
                closeModal();
                showPage('admin-page');
                createWinnerConfetti();
                showToast('üçì Selamat datang, Admin Strawberry!');
            } else {
                showModal('‚ùå Ralat Log Masuk', 'üçì Nama pengguna atau kata laluan salah.', [{
                    text: 'OK',
                    className: 'btn-ghost',
                    onClick: () => {}
                }]);
            }
        }

        // Participant management
        function addParticipant() {
            const nameInput = $('#nameInput');
            const name = nameInput.value.trim();

            if (name === '') {
                showToast('‚ö†Ô∏è Sila masukkan nama peserta');
                return;
            }

            if (state.participants.includes(name)) {
                showToast('‚ö†Ô∏è Peserta ini sudah wujud');
                return;
            }

            state.participants.push(name);
            nameInput.value = '';
            renderList();
            saveState();
            updateStats();
            showToast(`üçì ${name} berjaya ditambah!`);
            createStrawberryPop();
        }

        function renderList() {
            const listEl = $('#list');
            if (!listEl) return;

            listEl.innerHTML = '';
            if (state.participants.length === 0) {
                listEl.innerHTML = '<li style="text-align: center; opacity: 0.7; border: 2px dashed var(--strawberry-light);">üçì Belum ada peserta</li>';
                return;
            }

            state.participants.forEach((name, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>üçì ${name}</span>
                    <button class="btn btn-ghost" onclick="deleteParticipant(${index})" style="padding: 0.5rem 1rem; font-size: 0.9rem;">üóëÔ∏è</button>
                `;
                listEl.appendChild(li);
            });
            drawWheel();
        }

        function deleteParticipant(index) {
            const name = state.participants[index];
            showModal('üóëÔ∏è Padam Peserta', `Padam '${name}' dari senarai?`, [
                { 
                    text: 'üóëÔ∏è Padam', 
                    className: 'btn-ghost', 
                    onClick: () => {
                        state.participants.splice(index, 1);
                        renderList();
                        saveState();
                        updateStats();
                        showToast(`üóëÔ∏è ${name} telah dipadamkan`);
                    }
                },
                { text: '‚ùå Batal', className: '', onClick: () => {} }
            ]);
        }

        function loadSampleData() {
            if (state.participants.length > 0 && !confirm('üçì Gantikan data sedia ada dengan data contoh?')) {
                return;
            }

            state.participants = [
                'üçì Ahmad Strawberry bin Ali',
                'üçì Siti Nurhaliza bt Ahmad',
                'üçì Mohammad Rahman bin Ibrahim', 
                'üçì Fatimah Zahra bt Hassan',
                'üçì Hassan Abdullah bin Omar',
                'üçì Nurul Ain bt Mahmud',
                'üçì Azman Strawberry bin Yusof',
                'üçì Zarina bt Ahmad'
            ];

            renderList();
            saveState();
            updateStats();
            createWinnerConfetti();
            showToast(`üçì ${state.participants.length} peserta contoh dimuat!`);
        }

        // Wheel drawing
        function drawWheel() {
            const canvas = $('#wheel');
            if (!canvas) return;

            wheelCtx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            wheelCtx.clearRect(0, 0, w, h);

            const N = state.participants.length;
            if (N === 0) {
                wheelCtx.font = "bold 24px 'Orbitron'";
                wheelCtx.fillStyle = 'rgba(255,255,255,0.5)';
                wheelCtx.textAlign = 'center';
                wheelCtx.textBaseline = 'middle';
                wheelCtx.fillText("üçì Tambah Peserta", w/2, h/2 - 10);
                wheelCtx.fillText("untuk mula", w/2, h/2 + 20);
                return;
            }

            const r = Math.min(w, h) / 2;
            const segAngle = (Math.PI * 2) / N;

            wheelCtx.save();
            wheelCtx.translate(w / 2, h / 2);
            wheelCtx.rotate(angle);

            for (let i = 0; i < N; i++) {
                const startAngle = i * segAngle;
                const endAngle = startAngle + segAngle;
                const color = colors[i % colors.length];

                // Draw segment
                wheelCtx.beginPath();
                wheelCtx.moveTo(0, 0);
                wheelCtx.arc(0, 0, r, startAngle, endAngle);
                wheelCtx.closePath();

                // Gradient fill
                const gradient = wheelCtx.createRadialGradient(0, 0, 0, 0, 0, r);
                gradient.addColorStop(0, color);
                gradient.addColorStop(1, adjustBrightness(color, -30));
                wheelCtx.fillStyle = gradient;
                wheelCtx.fill();

                wheelCtx.strokeStyle = 'rgba(255,255,255,0.3)';
                wheelCtx.lineWidth = 2;
                wheelCtx.stroke();

                // Draw text
                wheelCtx.save();
                wheelCtx.rotate(startAngle + segAngle / 2);
                wheelCtx.textAlign = 'center';
                wheelCtx.textBaseline = 'middle';
                wheelCtx.fillStyle = 'white';
                wheelCtx.font = `bold ${Math.max(12, r * 0.035)}px 'Poppins'`;
                wheelCtx.shadowColor = 'rgba(0, 0, 0, 0.8)';
                wheelCtx.shadowBlur = 3;

                const text = state.participants[i];
                const maxLength = r < 200 ? 15 : 25;
                const displayText = text.length > maxLength ? text.substring(0, maxLength) + '...' : text;

                wheelCtx.translate(r * 0.7, 0);
                wheelCtx.rotate(Math.PI / 2);
                wheelCtx.fillText(displayText, 0, 0);
                wheelCtx.restore();
            }

            // Center circle
            wheelCtx.beginPath();
            wheelCtx.arc(0, 0, r * 0.15, 0, Math.PI * 2);
            const centerGradient = wheelCtx.createRadialGradient(0, 0, 0, 0, 0, r * 0.15);
            centerGradient.addColorStop(0, '#ff1744');
            centerGradient.addColorStop(1, '#c51162');
            wheelCtx.fillStyle = centerGradient;
            wheelCtx.fill();
            wheelCtx.strokeStyle = 'rgba(255,255,255,0.5)';
            wheelCtx.lineWidth = 3;
            wheelCtx.stroke();

            // Strawberry emoji in center
            wheelCtx.font = 'bold 24px Arial';
            wheelCtx.fillStyle = 'white';
            wheelCtx.textAlign = 'center';
            wheelCtx.textBaseline = 'middle';
            wheelCtx.fillText('üçì', 0, 0);

            wheelCtx.restore();
        }

        function adjustBrightness(hex, amount) {
            const num = parseInt(hex.replace('#', ''), 16);
            const amt = Math.round(2.55 * amount);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // Spin wheel
        async function spinWheel() {
            if (state.participants.length < 2) {
                showToast('‚ö†Ô∏è Perlukan sekurang-kurangnya 2 peserta!');
                return;
            }

            if (state.spinning) return;

            state.spinning = true;
            const spinBtn = $('#spinBtn');
            const spinBanner = $('#spinBanner');

            spinBtn.disabled = true;
            spinBtn.innerHTML = '<span class="loading-spinner"></span> Berputar...';
            spinBanner.style.display = 'block';

            playSound('audioDrumroll', { volume: 0.5, loop: true });

            const spins = 5 + Math.random() * 5;
            const finalAngle = Math.random() * Math.PI * 2;
            const totalRotation = spins * Math.PI * 2 + finalAngle;

            const startTime = Date.now();
            const duration = 5000;
            const startAngle = angle;

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOut = 1 - Math.pow(1 - progress, 4);

                angle = startAngle + totalRotation * easeOut;
                drawWheel();

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Calculate winner
                    const normalizedAngle = (2 * Math.PI - (angle % (2 * Math.PI))) % (2 * Math.PI);
                    const segAngle = (2 * Math.PI) / state.participants.length;
                    const winnerIndex = Math.floor(normalizedAngle / segAngle);
                    const winner = state.participants[winnerIndex];

                    document.getElementById('audioDrumroll').pause();
                    playSound('audioFanfare', { volume: 0.8 });

                    // Show winner
                    setTimeout(() => {
                        showWinner(winner);

                        // Remove from participants, add to winners
                        state.participants.splice(winnerIndex, 1);
                        state.winners.push({
                            name: winner,
                            category: $('#prizeCategory').value,
                            time: new Date().toISOString()
                        });

                        saveState();
                        renderList();
                        renderWinners();
                        updateStats();

                        state.spinning = false;
                        spinBtn.disabled = false;
                        spinBtn.innerHTML = 'üé∞ PUTAR RODA STRAWBERRY! üçì';
                        spinBanner.style.display = 'none';
                    }, 1000);
                }
            }

            requestAnimationFrame(animate);
        }

        function showWinner(winnerName) {
            const overlay = $('#winnerOverlay');
            const nameEl = $('#winnerName');
            const categoryEl = $('#winnerCategory');

            nameEl.textContent = winnerName;
            categoryEl.textContent = $('#prizeCategory').value;

            overlay.classList.add('show');
            createWinnerConfetti();
            createStrawberryExplosion();

            // Vibration for mobile
            if (navigator.vibrate) {
                navigator.vibrate([300, 100, 300, 100, 300]);
            }
        }

        function closeWinnerOverlay() {
            $('#winnerOverlay').classList.remove('show');
        }

        // Winners management
        function renderWinners() {
            const tbody = $('#winnersBody');
            if (!tbody) return;

            tbody.innerHTML = '';
            if (state.winners.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; opacity: 0.7; font-style: italic;">üçì Belum ada pemenang strawberry</td></tr>';
                return;
            }

            state.winners.forEach((winner, index) => {
                const time = new Date(winner.time).toLocaleTimeString('ms-MY', {hour: '2-digit', minute:'2-digit'});
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${index + 1}</td>
                    <td>üçì ${winner.name}</td>
                    <td>${winner.category}</td>
                    <td>${time}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Animation effects
        function createFloatingStrawberries() {
            const container = $('#strawberries');

            function createStrawberry() {
                const strawberry = document.createElement('div');
                strawberry.className = 'strawberry';
                strawberry.textContent = 'üçì';
                strawberry.style.left = Math.random() * 100 + '%';
                strawberry.style.animationDuration = (Math.random() * 8 + 12) + 's';
                strawberry.style.animationDelay = Math.random() * 2 + 's';

                container.appendChild(strawberry);

                setTimeout(() => {
                    if (strawberry.parentNode) {
                        strawberry.remove();
                    }
                }, 20000);
            }

            // Create initial strawberries
            for (let i = 0; i < 15; i++) {
                setTimeout(() => createStrawberry(), i * 800);
            }

            // Continue creating strawberries
            setInterval(createStrawberry, 4000);
        }

        function createSparkles() {
            const container = $('#sparkles');

            function createSparkle() {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 4 + 's';

                container.appendChild(sparkle);

                setTimeout(() => sparkle.remove(), 4000);
            }

            for (let i = 0; i < 20; i++) {
                setTimeout(() => createSparkle(), i * 200);
            }

            setInterval(createSparkle, 1000);
        }

        function createWinnerConfetti() {
            const colors = ['#ff1744', '#4caf50', '#ffd700', '#ff5983'];

            // Multiple confetti bursts
            confetti({
                particleCount: 150,
                spread: 90,
                origin: { y: 0.6 },
                colors: colors
            });

            setTimeout(() => {
                confetti({
                    particleCount: 100,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: colors
                });
            }, 250);

            setTimeout(() => {
                confetti({
                    particleCount: 100,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: colors
                });
            }, 400);
        }

        function createStrawberryExplosion() {
            const emojis = ['üçì', 'üéâ', '‚≠ê', 'üèÜ', '‚ú®', 'üéä'];

            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.position = 'fixed';
                    emoji.style.left = Math.random() * 100 + 'vw';
                    emoji.style.top = '-50px';
                    emoji.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    emoji.style.zIndex = '1002';
                    emoji.style.pointerEvents = 'none';
                    emoji.style.animation = `confettiFall ${Math.random() * 4 + 3}s linear forwards`;

                    document.body.appendChild(emoji);

                    setTimeout(() => emoji.remove(), 8000);
                }, i * 50);
            }
        }

        function createStrawberryPop() {
            const pop = document.createElement('div');
            pop.innerHTML = 'üçì';
            pop.style.position = 'fixed';
            pop.style.top = '50%';
            pop.style.left = '50%';
            pop.style.fontSize = '3rem';
            pop.style.zIndex = '1002';
            pop.style.pointerEvents = 'none';
            pop.style.animation = 'winnerPop 0.8s ease forwards';

            document.body.appendChild(pop);
            setTimeout(() => pop.remove(), 1000);
        }

        // Toast notifications
        function showToast(message) {
            const existingToasts = document.querySelectorAll('.toast');
            existingToasts.forEach(toast => toast.remove());

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--glass);
                backdrop-filter: blur(20px);
                border: 2px solid var(--strawberry);
                color: var(--white);
                padding: 1rem 1.5rem;
                border-radius: var(--radius-md);
                font-family: 'Poppins', sans-serif;
                font-weight: 600;
                z-index: 1003;
                box-shadow: var(--shadow-strawberry);
                animation: toastSlideIn 0.3s ease-out;
                max-width: 350px;
                word-wrap: break-word;
            `;

            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'toastSlideOut 0.3s ease-in forwards';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // Countdown timer
        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const daysEl = $('#days');
            const hoursEl = $('#hours');
            const minutesEl = $('#minutes');
            const secondsEl = $('#seconds');

            if (distance < 0) {
                if (daysEl) daysEl.parentElement.parentElement.innerHTML = '<div style="font-size: 2rem; color: var(--strawberry); font-weight: bold;">üçì Masa Lucky Draw Strawberry! üçì</div>';
            } else {
                if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
                if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
                if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
                if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
            }
        }

        // QR Code generation
        function generateQRCode() {
            const nameInput = $('#qrNameInput');
            const name = nameInput.value.trim();

            if (!name) {
                showToast('‚ö†Ô∏è Masukkan nama untuk jana QR');
                return;
            }

            const canvas = $('#qr-code-canvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Simple QR placeholder (you would use a real QR library here)
            ctx.fillStyle = '#000000';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üçì QR CODE üçì', canvas.width/2, 40);
            ctx.fillText(name, canvas.width/2, 70);
            ctx.fillText('üçìüçìüçìüçìüçì', canvas.width/2, canvas.height - 40);

            // Draw simple QR pattern
            for (let i = 0; i < 20; i++) {
                for (let j = 0; j < 20; j++) {
                    if (Math.random() > 0.5) {
                        ctx.fillRect(20 + i * 10, 100 + j * 10, 8, 8);
                    }
                }
            }

            showToast(`üçì QR kod untuk ${name} telah dijana!`);
        }

        // Export winners
        function exportCSV() {
            if (state.winners.length === 0) {
                showToast('‚ö†Ô∏è Tiada pemenang untuk export');
                return;
            }

            const header = ['No', 'Nama', 'Kategori', 'Masa'];
            const rows = state.winners.map((w, i) => [
                i + 1,
                w.name,
                w.category,
                new Date(w.time).toLocaleString('ms-MY')
            ]);

            const csv = [header.join(','), ...rows.map(row => `"${row.join('","')}"`)].join('\n');
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', `pemenang_strawberry_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showToast('üçì Senarai pemenang telah diexport!');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved state
            loadState();
            renderList();
            renderWinners();
            drawWheel();

            // Start animations
            createFloatingStrawberries();
            createSparkles();

            // Start countdown
            updateCountdown();
            setInterval(updateCountdown, 1000);

            // Button event listeners
            const addNameBtn = $('#addNameBtn');
            const nameInput = $('#nameInput');
            const generateQrBtn = $('#generateQrBtn');
            const qrNameInput = $('#qrNameInput');
            const clearParticipantsBtn = $('#clearParticipantsBtn');
            const exportBtn = $('#exportBtn');
            const clearWinnersBtn = $('#clearWinnersBtn');

            if (addNameBtn) addNameBtn.addEventListener('click', addParticipant);
            if (nameInput) nameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addParticipant();
            });

            if (generateQrBtn) generateQrBtn.addEventListener('click', generateQRCode);
            if (qrNameInput) qrNameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') generateQRCode();
            });

            if (clearParticipantsBtn) clearParticipantsBtn.addEventListener('click', () => {
                showModal('üóëÔ∏è Padam Semua Peserta', 'üçì Adakah anda pasti mahu padam semua peserta?', [
                    { text: 'üóëÔ∏è Padam', className: 'btn-ghost', onClick: () => {
                        state.participants = [];
                        renderList();
                        saveState();
                        updateStats();
                        showToast('üóëÔ∏è Semua peserta telah dipadamkan');
                    }},
                    { text: '‚ùå Batal', className: '', onClick: () => {} }
                ]);
            });

            if (exportBtn) exportBtn.addEventListener('click', exportCSV);
            if (clearWinnersBtn) clearWinnersBtn.addEventListener('click', () => {
                showModal('üóëÔ∏è Kosongkan Pemenang', 'üçì Padam semua pemenang?', [
                    { text: 'üóëÔ∏è Padam', className: 'btn-ghost', onClick: () => {
                        state.winners = [];
                        renderWinners();
                        saveState();
                        updateStats();
                        showToast('üóëÔ∏è Pemenang telah dikosongkan');
                    }},
                    { text: '‚ùå Batal', className: '', onClick: () => {} }
                ]);
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                    closeWinnerOverlay();
                }

                if (e.key === ' ' && state.currentPage === 'wheelPage') {
                    e.preventDefault();
                    spinWheel();
                }
            });

            // Welcome message
            setTimeout(() => {
                showToast('üçì Selamat datang ke Lucky Draw Strawberry Premium! üçì');
            }, 1500);
        });

        // CSS for confetti fall animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                0% {
                    transform: translateY(-100px) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>